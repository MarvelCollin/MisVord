/* Voice Activity Speaking Indicators */
.speaking-indicator {
    position: relative;
    animation: speaking-pulse 1.5s infinite;
    box-shadow: 0 0 0 2px rgba(35, 165, 85, 0.7);
    border-radius: 50%;
}

@keyframes speaking-pulse {
    0% {
        box-shadow: 0 0 0 2px rgba(35, 165, 85, 0.7), 0 0 0 6px rgba(35, 165, 85, 0.0);
    }
    50% {
        box-shadow: 0 0 0 2px rgba(35, 165, 85, 0.9), 0 0 0 6px rgba(35, 165, 85, 0.3);
    }
    100% {
        box-shadow: 0 0 0 2px rgba(35, 165, 85, 0.7), 0 0 0 6px rgba(35, 165, 85, 0.0);
    }
}

.speaking-indicator::before {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 50%;
    border: 2px solid #23A555;
    animation: speaking-ring 1.5s infinite;
}

@keyframes speaking-ring {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    100% {
        transform: scale(1.3);
        opacity: 0;
    }
}

.voice-participant-card .speaking-indicator {
    box-shadow: 0 0 0 2px rgba(35, 165, 85, 0.8);
}

.voice-participant-card .speaking-indicator::before {
    border-color: #23A555;
}

.participant-card .speaking-indicator {
    box-shadow: 0 0 0 3px rgba(35, 165, 85, 0.8);
}

.participant-card .speaking-indicator::before {
    border-color: #23A555;
    border-width: 3px;
}

.participant-card .speaking-indicator img {
    border-radius: 50%;
}

.voice-participant-card .speaking-indicator img {
    border-radius: 50%;
}

/* Enhanced speaking indicator for better visibility */
.speaking-indicator.enhanced {
    border: 2px solid #23A555;
    background: radial-gradient(circle at center, rgba(35, 165, 85, 0.1) 0%, transparent 70%);
}

.speaking-indicator.enhanced::after {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 2px solid transparent;
    background: linear-gradient(45deg, #23A555, #57F287, #23A555) border-box;
    mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
    mask-composite: xor;
    animation: speaking-glow 2s infinite;
}

@keyframes speaking-glow {
    0%, 100% {
        opacity: 0.6;
        transform: scale(1) rotate(0deg);
    }
    50% {
        opacity: 1;
        transform: scale(1.05) rotate(180deg);
    }
}

/* Discord-style speaking animation */
.speaking-indicator.discord-style {
    border: 3px solid #23A555;
    animation: discord-speaking 0.2s ease-in-out infinite alternate;
}

@keyframes discord-speaking {
    0% {
        border-color: #23A555;
        box-shadow: 0 0 0 0 rgba(35, 165, 85, 0.4);
    }
    100% {
        border-color: #57F287;
        box-shadow: 0 0 0 4px rgba(87, 242, 135, 0.2);
    }
}

/* Smooth transitions */
.relative, .participant-avatar {
    transition: all 0.3s ease;
}

.speaking-indicator {
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

/* Fallback for older browsers */
@supports not (animation: speaking-pulse) {
    .speaking-indicator {
        border: 2px solid #23A555;
        box-shadow: 0 0 8px rgba(35, 165, 85, 0.6);
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .speaking-indicator {
        border: 3px solid #00FF00;
        box-shadow: 0 0 0 2px #00FF00;
    }
}

/* Reduced motion accessibility */
@media (prefers-reduced-motion: reduce) {
    .speaking-indicator {
        animation: none;
        border: 2px solid #23A555;
        box-shadow: 0 0 0 2px rgba(35, 165, 85, 0.8);
    }
    
    .speaking-indicator::before,
    .speaking-indicator::after {
        animation: none;
    }
}
